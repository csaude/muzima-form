<!--FGHDemographicsUpdateForm.html-->
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/muzima.css" rel="stylesheet">
    <link href="css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="css/ui-darkness/jquery-ui-1.10.4.custom.min.css" rel="stylesheet">

    <script src="js/jquery.min.js"></script>
    <script src="js/jquery-ui-1.10.4.custom.min.js"></script>
    <script src="js/jquery.validate.min.js"></script>
    <script src="js/additional-methods.min.js"></script>
    <script src="js/bootstrap-datetimepicker.min.js"></script>
    <script src="js/muzima.js"></script>
    <meta charset="utf-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Formulário de Dados Demográficos do Paciente</title>
</head>
<body class="col-md-8 col-md-offset-2">

<div id="result">

</div>
<div id="pre_populate_data">
</div>
<form id="demographics_update_form" name="demographics_update_form">
    <h4 class="text-center">Formulário de Dados Demográficos do Paciente</h4>

    <div class="section">
        <h6>Identificadores</h6>
        <div class="form-group">
            <label class="input-label" for="patient.medical_record_number">NID : </label>

            <div class="form-horizontal">
                <div class="group-set" id="patient.medical_record_number" data-group="patient.medical_record_number">
                    <input class="barcode_text form-control" id="tmp.medical_record_number"
                           name="tmp.medical_record_number" type="text" readonly>
                    <input type="hidden" id="identifier_value" name="identifier_value">
                    <input data-metadata-for="identifier_value" type="hidden" id="identifier_type_uuid" name="identifier_type_uuid" value="e2b966d0-1d5f-11e0-b929-000c29ad1d07">
                </div>
            </div>
        </div>
    </div>
    <div class="section" id="patient_names">
        <h6>
            <a data-toggle="collapse" data-parent="#accordion" href="#patient_names" aria-expanded="false" aria-controls="patient_names" id="patient_names.section">
                1. Nome do Paciente
            </a>
        </h6>
        <div id="patient_names" class="panel-collapse collapse in">
            <div id="patient_names.section_div">
                <div class="form-group">
                    <input class="form-control" id="patient.uuid"
                           name="patient.uuid" type="hidden" readonly="readonly">
                </div>
                <div class="form-group">
                    <label class="input-label" for="patient.family_name">Apelido: <span class="required">*</span> </label>
                    <input class="form-control" id="patient.family_name" name="patient.family_name" type="text"
                           readonly="readonly" required="required">
                </div>
                <div class="form-group">
                    <label class="input-label" for="patient.given_name">Nome: <span class="required">*</span></label>
                    <input class="form-control" id="patient.given_name" name="patient.given_name" type="text"
                           readonly="readonly" required="required">
                </div>
                <div class="form-group">
                    <label class="input-label" for="patient.middle_name">Nome do meio:</label>
                    <input class="form-control" id="patient.middle_name" name="patient.middle_name" type="text"
                    readonly="readonly">
                </div>
                <div class="form-group">
                    <label class="input-label" for="patient.nick_name">Nome de Casa / Alcunha</label>
                    <input class="form-control" id="patient.nick_name" name="patient.nick_name" type="text"
                    readonly="readonly">
                </div>
                <div class="form-group">
                    <label class="input-label" for="tmp.update_names">
                        <input id="tmp.update_names" name="tmp.update_names"
                           type="checkbox">
                           Vai atualizar nomes? (se sim, permitir editar)
                    </label>
                </div>
            </div>
        </div>
    </div>
    <div class="section" id="update_names">
        <h6>Adicionar Nomes</h6>
        <div class="form-group">
            <label class="input-label" for="demographicsupdate.family_name">Novo Apelido: <span class="required">*</span> </label>
            <input class="form-control" id="demographicsupdate.family_name" maxlength="50" name="demographicsupdate.family_name" type="text"
                   required="required">
        </div>
        <div class="form-group">
            <label class="input-label" for="demographicsupdate.given_name">Novo Nome: <span class="required">*</span></label>
            <input class="form-control" id="demographicsupdate.given_name" maxlength="50" name="demographicsupdate.given_name" type="text"
                   required="required">
        </div>
        <div class="form-group">
            <label class="input-label" for="demographicsupdate.middle_name">Novo nome do meio:</label>
            <input class="form-control" id="demographicsupdate.middle_name" maxlength="50" name="demographicsupdate.middle_name" type="text">
        </div>
        <div class="form-group">
            <label class="input-label" for="demographicsupdate.nick_name">Novo Nome de Casa / Alcunha</label>
            <input class="form-control" id="demographicsupdate.nick_name" maxlength="50" name="demographicsupdate.nick_name" type="text" data-concept="23924^ALCUNHA DO PACIENTE^99DCT">
        </div>
    </div>
    <div class="section" id="patient_gender">
        <h6>
            <a data-toggle="collapse" data-parent="#accordion" href="#patient_gender" aria-expanded="false" aria-controls="patient_gender" id="patient_gender.section">
                2. Gênero
            </a>

        </h6>
        <div id="patient_gender" class="panel-collapse collapse in">
            <div class="form-group" id="patient_gender.section_div">
                <div class="form-group">
                    <label class="input-label" for="patient.sex">Sexo: <span class="required">*</span></label>
                    <input id="patient.sex" name="patient.sex" type="hidden">
                    <input class="form-control" disabled id="tmp.patient.sex" name="tmp.patient.sex" type="text">
                </div>
                <div class="form-group">
                    <label class="input-label" for="tmp.update_sex">
                        <input id="tmp.update_sex" name="tmp.update_sex"
                           type="checkbox">
                           Vai actualizar gênero? (se sim, permitir editar)
                    </label>
                </div>
                <div class="form-group sub-section" id="update_sex">
                    <label class="input-label" for="demographicsupdate.sex">Novo Sexo: <span class="required">*</span></label>
                    <select class="form-control" id="demographicsupdate.sex" name="demographicsupdate.sex">
                        <option value="">...</option>
                        <option value="M">Masculino</option>
                        <option value="F">Feminino</option>
                    </select>
                </div>
            </div>
        </div>

        </div>
        <div class="section" id="patient_age">
            <h6>
                <a data-toggle="collapse" data-parent="#accordion" href="#patient_age" aria-expanded="false" aria-controls="patient_age" id="patient_age.section">
                    3. Idade
                </a>

            </h6>
            <div id="patient_age" class="panel-collapse collapse in">
                <div class="form-group" id="patient_age.section_div">
                    <div class="form-group birthdate">
                        <label class="input-label" for="patient.birth_date">Data de nascimento  <span class="required">*</span></label>
                        <input class="form-control birth_date_picker nonFutureDate" id="patient.birth_date" name="patient.birth_date"
                               type="text" disabled="disabled" readonly="readonly">
                    </div>
                    <div class="form-group birthdate">
                        <label class="input-label" for="patient.birthdate_estimated">Esta data de nascimento é uma estimativa?  <span class="required">*</span></label>
                        <select class="form-control" id="patient.birthdate_estimated" name="patient.birthdate_estimated"
                                disabled="disabled" readonly="readonly">
                            <option value="">...</option>
                            <option value="true">Sim</option>
                            <option value="false">Não</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="input-label" for="tmp.update_birthdate">
                            <input id="tmp.update_birthdate" name="tmp.update_birthdate"
                               type="checkbox">
                               Vai atualizar a data de nascimento? (se sim, permitir editar)
                        </label>
                    </div>
                    <div id="update_birthdate" class="sub-section">
                        <div class="form-group">
                            <label for="tmp.birthdate_type">Registrará a data de nascimento... <span class="required">*</span></label>
                            <select class="form-control" name="tmp.birthdate_type" id="tmp.birthdate_type" required="required">
                                <option value="">...</option>
                                <option value="birthdate">Por data de nascimento</option>
                                <option value="age">Por idade</option>
                            </select>
                        </div>
                        <div class="form-group show_birthdate">
                            <label class="input-label" for="demographicsupdate.birth_date">Selecione Nova Data de Nascimento<span class="required">*</span></label>
                            <input class="form-control birth_date_picker nonFutureDate" id="demographicsupdate.birth_date"
                            name="demographicsupdate.birth_date"
                                   type="text"
                                   required="required"
                                   readonly="readonly">
                        </div>
                        <div class="form-group show_birthdate">
                            <label class="input-label" for="demographicsupdate.birthdate_estimated">Esta data de nascimento é uma estimativa? <span
                                    class="required">*</span></label>
                            <select class="form-control" id="demographicsupdate.birthdate_estimated" name="demographicsupdate.birthdate_estimated"
                                    required="required">
                                <option value="">...</option>
                                <option value="true">SIM</option>
                                <option value="false">NÃO</option>
                            </select>
                        </div>
                        <div class="form-group show_age">
                            <label class="input-label" for="tmp.age_in_years">Quantos anos de idade tem?<span class="required">*</span></label>
                            <input class="form-control" id="tmp.age_in_years" name="tmp.age_in_years" type="number" required="required">

                        </div>
                    </div>
                </div>
            </div>
    </div>
    <div class="section group-set patient_address_section" data-group="patient.personaddress"  id="patient_address">
        <h6>
            <a data-toggle="collapse" data-parent="#accordion" href="#patient_address" aria-expanded="false" aria-controls="patient_address" id="patient_address.section">
                4. Endereço
            </a>
            <a data-toggle="collapse" data-parent="#accordion" aria-expanded="false" href="#patient_address" id="patient_address.section">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-collapse" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>
                </svg>
            </a>
        </h6>
        <div id="patient_address" class="panel-collapse collapse in">
            <div class="form-group" id="patient_address.section_div">
                <div class="form-group">
                    <label class="input-label" for="address1">Avenida/Rua/Casa: </label>
                    <input class="form-control" id="address1" name="address1" type="text" readonly="readonly">
                    <input class="form-control addressPreferredField" id="preferred" name="preferred" type="hidden">
                </div>
                <div class="form-group">
                    <label class="input-label" for="address6">Localidade: </label>
                    <input class="form-control" id="address6" name="address6" type="text" readonly="readonly">
                </div>
                <div class="form-group">
                    <label class="input-label" for="address3">Quarteirão: </label>
                    <input class="form-control" id="address3" name="address3" type="text" readonly="readonly">
                </div>
                <div class="form-group">
                    <label class="input-label" for="address5">Bairro: </label>
                    <input class="form-control" id="address5" name="address5" type="text" readonly="readonly">
                </div>
                <div class="form-group">
                    <label class="input-label" for="patient.address_reference">Ponto de referência: </label>
                    <input class="form-control" id="patient.address_reference" name="patient.address_reference" type="text" readonly="readonly">
                </div>
                <div class="form-group">
                <label class="input-label" for="tmp.update_address">
                    <input id="tmp.update_address" name="tmp.update_address"
                       type="checkbox">
                       Vai atualizar o endereço? (se sim, permitir editar)
                </label>
            </div>
            </div>
        </div>
    </div>
    <div class="section" id="update_address">
        <h6>Novo endereço</h6>
        <div class="group-set" data-group="demographicsupdate.personaddress">
            <div class="form-group">
                <label class="input-label" for="address1">Nova Avenida/Rua: </label>
                <input class="form-control" id="address1" name="address1" type="text">
            </div>
            <div class="form-group">
                <label class="input-label" for="address6">Nova Localidade: </label>
                <input class="form-control" id="address6" name="address6" type="text">
            </div>
            <div class="form-group">
                <label class="input-label" for="address3">Novo Quarteirão: </label>
                <input class="form-control" id="address3" name="address3" type="text">
            </div>
            <div class="form-group">
                <label class="input-label" for="address5">Novo Bairro: </label>
                <input class="form-control" id="address5" name="address5" type="text">
            </div>
            <input class="form-control" id="preferred" name="preferred" type="hidden" value="true">
        </div>
        <div class="form-group group-set" data-group="demographicsupdate.personattribute">
            <label class="input-label" for="address_reference">Novo Ponto de referência: </label>
            <input class="form-control" id="attribute_value" name="attribute_value" type="text" maxlength="50">
            <input data-metadata-for="attribute_value" type="hidden" id="attribute_type_uuid" name="attribute_type_uuid" value="e944813c-11b1-49f3-b9a5-9fbbd10beec2">
            <input type="hidden" data-metadata-for="attribute_value" id="attribute_type_name" name="attribute_type_name" value="Ponto de Referência">
        </div>
    </div>
    <div class="section" id="patient_confident_info">
        <h6>
            <a data-toggle="collapse" data-parent="#accordion" href="#patient_confident_info" aria-expanded="false" aria-controls="patient_confident_info" id="patient_confident_info.section">
                5. Paciente autorizou contacto com
            </a>
            <a data-toggle="collapse" data-parent="#accordion" aria-expanded="false" href="#patient_confident_info" id="patient_confident_info.section">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-collapse" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>
                </svg>
            </a>
        </h6>
        <div id="patient_confident_info" class="panel-collapse collapse in">
        <div class="form-group" id="patient_confident_info.section_div">
            <fieldset name="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT">
                <div class="form-group">
                    <label class="input-label" class="font-normal">
                        <input id="confident_auth.proprio" type="checkbox" disabled="disabled"
                               data-concept="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT"
                               value="5325^PATIENT ID^99DCT"/>
                               Próprio
                    </label>
                </div>
                <div class="form-group">
                    <label class="input-label" class="font-normal">
                        <input id="confident_auth.confidente" type="checkbox" disabled="disabled"
                               data-concept="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT"
                               value="1740^CONFIDANT NAME^99DCT"/>
                               Confidente
                    </label>

                </div>
                <div class="form-group">
                    <label  class="input-label"class="font-normal">
                        <input id="confident_auth.outro" type="checkbox" disabled="disabled"
                               data-concept="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT"
                               value="23932^Another person the patient has authorized contact^99DCT"/>
                               Outro (Nome)
                    </label>
                    <input class="form-control" id="confident_auth_other_name" name="confident_auth_other_name" type="text" readonly="readonly">

                </div>
            </fieldset>
        </div>

        </div>
        <h6>
            <a data-toggle="collapse" data-parent="#accordion" href="#patient_confident" aria-expanded="false" aria-controls="patient_confident" id="patient_confident.section">
                6. Confidente
            </a>
            <a data-toggle="collapse" data-parent="#accordion" aria-expanded="false" href="#patient_confident" id="patient_confident.section">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-collapse" viewBox="0 0 16 16">
                    <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>
                </svg>
            </a>
        </h6>
        <div id="patient_confident" class="panel-collapse collapse in">
            <div class="form-group" id="patient_confident.section_div">
           <div class="form-group">
            <label class="input-label" for="patient_confident.name">Nome do confidente: </label>
            <input class="form-control" id="patient_confident.name" name="patient_confident.name" type="text" readonly="readonly">
        </div>
        <div class="form-group">
            <label class="input-label" for="patient_confident.nick_name">Alcunha do confidente: </label>
            <input class="form-control" id="patient_confident.nick_name" name="patient_confident.nick_name" type="text" readonly="readonly">
        </div>
        <div class="form-group">
            <label class="input-label" for="patient_confident.contact">Contacto do Confidente: </label>
            <input class="form-control" id="patient_confident.contact" name="patient_confident.contact" type="text" readonly="readonly">
        </div>
        <div class="form-group">
            <label class="input-label" for="patient_confident.reference">Ponto de referência: </label>
            <input class="form-control" id="patient_confident.reference" name="patient_confident.reference" type="text" readonly="readonly">
        </div>
        <div class="form-group">
            <label class="input-label" for="tmp.update_confident_auth">
                <input id="tmp.update_confident_auth" name="tmp.update_confident_auth"
                type="checkbox">
                Vai atualizar dados do confidente? (se sim, permitir editar)
            </label>
        </div>
        </div>

        </div>
        </div>
        


        <div class="section group-set" data-group="updated_patient.confident_auth" id="confident_auth">
            <div class="concept-set" id="convset_group_section" data-concept="165482^CONFIDENTE CONVSET^99DCT"> 
            <h6>Actualização de dados do confidente</h6>
            <div class="form-group">
                <fieldset name="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT">
                    <div class="form-group">
                        <label class="input-label" class="font-normal">
                            <input id="updated_confident_auth.proprio" type="checkbox"
                                   data-concept="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT"
                                   value="5325^PATIENT ID^99DCT"/>
                                   Próprio
                        </label>
                    </div>
                    <div class="form-group">
                        <label class="input-label" class="font-normal">
                            <input id="updated_confident_auth.confidente" type="checkbox"
                                   data-concept="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT"
                                   value="1740^CONFIDANT NAME^99DCT"/>
                                   Confidente
                        </label>
    
                    </div>
                    <div class="form-group">
                        <label class="input-label" class="font-normal">
                            <input id="updated_confident_auth.outro" type="checkbox"
                                   data-concept="2177^AUTHORIZED CONTACT WITH PATIENT^99DCT"
                                   value="23932^Another person the patient has authorized contact^99DCT"/>
                                   Outro 
                        </label>
                        <label class="input-label" for="updated_confident_auth_other_name">
                            (Nome:<span class="required">*</span>)
                            
                        </label>
                        <input class="form-control" id="updated_confident_auth_other_name" name="updated_confident_auth_other_name" required="required" 
                                type="text" data-concept="23932^Another person the patient has authorized contact^99DCT">
    
                    </div>
                </fieldset>
            </div>
        
        
        <div class="form-group">
            <label class="input-label" for="updated_confident.name">Novo Nome do confidente: </label>
            <input class="form-control" id="updated_confident.name" name="updated_confident.name" type="text" data-concept="1740^NOME DO CONFIDENTE^99DCT">
        </div>
       
        <div class="form-group">
            <label class="input-label" for="updated_confident.nick_name">Nova Alcunha do confidente: </label>
            <input class="form-control" id="updated_confident.nick_name" name="updated_confident.nick_name" type="text" data-concept="23930^ALCUNHA DO CONFIDENTE^99DCT">
        </div>
        <div class="form-group">
            <label class="input-label" for="updated_confident.contact">Novo Contacto do Confidente: </label>
            <input class="form-control" id="updated_confident.contact" name="updated_confident.contact" type="text" data-concept="6224^CONFIDENTE - NUMERO DE TELEFONE^99DCT">
        </div>
        <div class="form-group">
            <label class="input-label" for="updated_confident.reference">Novo Ponto de referência: </label>
            <input class="form-control" id="updated_confident.reference" name="updated_confident.reference" type="text" data-concept="165351^PONTO DE REFERÊNCIA DO CONFIDENTE^99DCT">
        </div>
        </div>
    </div>
    <div class="section" id="patient_contact">
        <div class="form-group">
            <h6>
                <a data-toggle="collapse" data-parent="#accordion" href="#patient_contact" aria-expanded="false" aria-controls="patient_contact" id="patient_contact.section">
                    7. Contacto Telemóvel do Paciente
                </a>
                <a data-toggle="collapse" data-parent="#accordion" aria-expanded="false" href="#patient_contact" id="patient_contact.section">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrows-collapse" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h13a.5.5 0 0 1 0 1h-13A.5.5 0 0 1 1 8zm7-8a.5.5 0 0 1 .5.5v3.793l1.146-1.147a.5.5 0 0 1 .708.708l-2 2a.5.5 0 0 1-.708 0l-2-2a.5.5 0 1 1 .708-.708L7.5 4.293V.5A.5.5 0 0 1 8 0zm-.5 11.707-1.146 1.147a.5.5 0 0 1-.708-.708l2-2a.5.5 0 0 1 .708 0l2 2a.5.5 0 0 1-.708.708L8.5 11.707V15.5a.5.5 0 0 1-1 0v-3.793z"/>
                    </svg>
                </a>
            </h6>
            <div id="patient_contact" class="panel-collapse collapse in">
                <div class="form-group" id="patient_contact.section_div">
                    <input class="form-control" id="patient.phone_number" name="patient.phone_number" type="tel" disabled="disabled">

                    <div class="form-group">
                        <label class="input-label" for="tmp.update_patient_contact">
                            <input id="tmp.update_patient_contact" name="tmp.update_patient_contact"
                            type="checkbox">
                            Vai atualizar o contacto? (se sim, permitir editar)
                        </label>
                    </div>
                    </div>
                </div>
            </div>
     </div>
    <div class="section" id="update_patient_contact">
        <div class="form-group group-set"  data-group="demographicsupdate.personattribute">
            <label class="input-label" for="phone_number">Novo Contacto do Paciente: </label>
            <input class="form-control" id="attribute_value" name="attribute_value" type="text" required="required">
            <input data-metadata-for="attribute_value" type="hidden" id="attribute_type_uuid" name="attribute_type_uuid" value="e2e3fd64-1d5f-11e0-b929-000c29ad1d07">
            <input type="hidden" data-metadata-for="attribute_value" id="attribute_type_name" name="attribute_type_name" value="Numero de Telefone">
        </div>
   </div>
   <div class="section" id="form_details_section">
      <h6>Detalhes do encontro</h6>
        <div class="form-group">
              <label class="input-label" for="encounter.encounter_datetime">Data do encontro<span class="required">*</span></label>
                 <input class="form-control datetimepicker nonFutureDate past-date" readonly="readonly" id="encounter.encounter_datetime"
                        name="encounter.encounter_datetime" type="text" required="required" disabled>
        </div>
        <div class="form-group">
            <label class="input-label" for="encounter.provider_id_select">Nome do Provedor:</label>
            <input class="form-control valid-provider-only" id="encounter.provider_id_select" type="text"
            placeholder="Comece a digitar..."  readonly="readonly">
            <input class="form-control" name="encounter.provider_id_select" type="hidden">
        </div>
        <div class="form-group show_provider_id_text">
            <label class="input-label" for="encounter.provider_id">ID do sistema do provedor:<span class="required">*</span></label>
            <input class="form-control checkDigit" id="encounter.provider_id" name="encounter.provider_id"
               type="text" required="required" disabled="disabled">
        </div>
        <div class="form-group">
            <label class="input-label" for="encounter.location_id">Local do Encontro:<span class="required">*</span></label>
            <input class="form-control valid-location-only" id="encounter.location_id" type="text"
            placeholder="Comece a digitar..." required="required"  readonly="readonly">
            <input class="form-control" name="encounter.location_id" type="hidden">
        </div>
        <div class="form-group">
            <input class="form-control" id="encounter.form_uuid" name="encounter.form_uuid" type="hidden" required="required">
            <input class="form-control" id="encounter.group_demographic_confident_obs" name="encounter.group_demographic_confident_obs" type="hidden" value="true" required="required">
            <input class="form-control" id="encounter.group_obs_concept_id" name="encounter.group_obs_concept_id" type="hidden" value="165482" required="required">
            <input class="form-control" id="demographicsupdate.is_updated_name_preferred" name="demographicsupdate.is_updated_name_preferred"
               type="hidden" value="false">
            <input class="form-control" id="tmp.custom_discriminator" name="tmp.custom_discriminator"
               value="mastercard-record-mapper" type="hidden" required="required">

            <input class="form-control" id="encounter.process_as_individual_obs" name="encounter.process_as_individual_obs" type="hidden" value="true">
        </div>
    </div>
</form>

</body>
<script type="text/javascript">
    $(document).ready(function () {
        var dateFormat = "dd-mm-yy";
        var currentDate = $.datepicker.formatDate(dateFormat, new Date());
        var encounterDatetime = $('#encounter\\.encounter_datetime');
        if ($(encounterDatetime).val() == "") {
            $(encounterDatetime).val(currentDate);
        }
        $('#form_details_section').hide();

        var currentYear = new Date().getFullYear();
        var birthdate_start_year = currentYear - 140;
        $('.birth_date_picker').datepicker({
            dateFormat: dateFormat,
            changeMonth: true,
            changeYear: true,
            yearRange: birthdate_start_year + ':' + currentYear,
        });


        $('#save_draft').click(function () {
            // pre process the medications
            $(this).prop('disabled', true);
            document.saveDraft(this);
            $(this).prop('disabled', false);
        });

        $('#submit_form').click(function () {
            // pre process the medications
            $(this).prop('disabled', true);
            document.submit();
            $(this).prop('disabled', false);
        });

        var patientUuid = $('#patient\\.uuid').val();
        var phoneNumberPersonAttributeType = "e2e3fd64-1d5f-11e0-b929-000c29ad1d07";
        var phoneNumber = htmlDataStore.getPersonAttribute(patientUuid,phoneNumberPersonAttributeType);
        phoneNumber = JSON.parse(phoneNumber);
        if('attribute_value' in phoneNumber){
            phoneNumber = phoneNumber.attribute_value;
        } else {
            phoneNumber = '';
        }
        $('#patient\\.phone_number').val(phoneNumber);

        $('#tmp\\.update_names').change(function(){
            if($(this).is(':checked')){

                var patientOldFamilyName = $('#patient\\.family_name').val();

                var patientOldGivenName = $('#patient\\.given_name').val();

                var patientOldMiddleName = $('#patient\\.middle_name').val();

                $('#demographicsupdate\\.family_name').val(patientOldFamilyName);

                $('#demographicsupdate\\.given_name').val(patientOldGivenName);

                $('#demographicsupdate\\.middle_name').val(patientOldMiddleName);

                $('#update_names').show();

                $('#demographicsupdate\\.is_updated_name_preferred').prop('value', true);
            } else {
                $('#update_names').hide();
                $('#demographicsupdate\\.is_updated_name_preferred').prop('value', false);
            }
        });
        $('#tmp\\.update_names').trigger('change');


        var patientOldFamilyName = $('#patient\\.family_name').val();

        var patientOldGivenName = $('#patient\\.given_name').val();

        var patientOldMiddleName = $('#patient\\.middle_name').val();

        $('#demographicsupdate\\.family_name').val(patientOldFamilyName);

        $('#demographicsupdate\\.given_name').val(patientOldGivenName);

        $('#demographicsupdate\\.middle_name').val(patientOldMiddleName);

        $('.edit_address_label').click(function(){
            $parent = $(this).closest('.form-group');
            if(!$parent.find('.update_address_confirm').prop('disabled')) {
                $parent.find('.update_address_confirm').prop("checked", !$parent.find('.update_address_confirm').prop("checked"));
                $parent.find('.update_address_confirm').trigger('change');
            }
        });


        $('.update_address_confirm_new').change(function(){
            var $parent = $(this).closest('.group-set');
            var $addressUpdateParent = $('#demographicsupdate\\.personAddress');
            if($(this).is(':checked')){
                $('#update_address').show();
                if($addressUpdateParent.find('.person_address_uuid').val() != $parent.find(".person_address_uuid").val()) {
                    $addressUpdateParent.find('.address1').val("");
                    $addressUpdateParent.find('.address3').val("");
                    $addressUpdateParent.find('.address4').val("");
                    $addressUpdateParent.find('.address5').val("");
                    $addressUpdateParent.find('.address6').val("");
                    $addressUpdateParent.find('.person_address_uuid').val("");
                }
                $('.update_address_confirm_new').not($(this)).prop('disabled',true);
            } else if($(this).is(':unchecked')){
                $('#update_address').hide();
            }
        });

        $('.tmp\\.edit_address').change(function(){
            var $parent = $(this).closest('.group-set');
            var $addressUpdateParent = $('#demographicsupdate\\.personAddress');
            if($(this).is(':checked')){
                $('#update_address').show();
                if($addressUpdateParent.find('.person_address_uuid').val() != $parent.find(".person_address_uuid").val()) {
                    $addressUpdateParent.find('.address1').val($("#old\\.address1").val());
                    $addressUpdateParent.find('.address3').val($("#old\\.address3").val());
                    $addressUpdateParent.find('.address4').val($("#old\\.address4").val());
                    $addressUpdateParent.find('.address5').val($("#old\\.address5").val());
                    $addressUpdateParent.find('.address6').val($("#old\\.address6").val());
                    $addressUpdateParent.find('.person_address_uuid').val($parent.find(".person_address_uuid").val());
                    $('.person_new_phone_number').val(phoneNumber);
                }

                $('.update_address_confirm').not($(this)).prop('disabled',true);
            } else if(!$(this).prop('disabled')) {
                $('#update_address').hide();
                $('.update_address_confirm').prop('disabled',false);
                if($addressUpdateParent.find('.person_address_uuid').val() == $parent.find(".person_address_uuid").val()) {
                    $addressUpdateParent.find('.address1').val($parent.find(".address1").val());
                    $addressUpdateParent.find('.address3').val($parent.find(".address3").val());
                    $addressUpdateParent.find('.address4').val($parent.find(".address4").val());
                    $addressUpdateParent.find('.address5').val($parent.find(".address5").val());
                    $addressUpdateParent.find('.address6').val($parent.find(".address6").val());
                    $addressUpdateParent.find('.person_address_uuid').val("");
                }
            }
        });
        $('.tmp\\.edit_address').trigger('change');

        $('#tmp\\.update_address').change(function(){
            if($(this).is(':checked')){
                $('#update_address').show();
            } else {
                $('#update_address').hide();
            }
        });
        $('#tmp\\.update_address').trigger('change');

        $('#tmp\\.update_confident').change(function(){
            if($(this).is(':checked')){
                $('#update_confident').show();
            } else {
                $('#update_confident').hide();
            }
        });
        $('#tmp\\.update_confident').trigger('change');

        $('#tmp\\.update_patient_contact').change(function(){
            if($(this).is(':checked')){
                $('#update_patient_contact').show();
            } else {
                $('#update_patient_contact').hide();
            }
        });
        $('#tmp\\.update_patient_contact').trigger('change');

        $('#tmp\\.update_confident_auth').change(function(){
            if($(this).is(':checked')){
                if ($('#confident_auth\\.proprio').is(":checked")) {
                    $('#updated_confident_auth\\.proprio').prop("checked", true);
                }
                if ($('#confident_auth\\.confidente').is(":checked")) {
                    $('#updated_confident_auth\\.confidente').prop("checked", true);
                }
                if ($('#confident_auth\\.outro').is(":checked")) {
                    $('#updated_confident_auth\\.outro').prop("checked", true);
                    $('#updated_confident_auth_other_name').val($('#confident_auth_other_name').val());
                    $('#updated_confident_auth_other_name').show();
                }
                $('#updated_confident\\.name').val($('#patient_confident\\.name').val());

                $('#updated_confident\\.nick_name').val($('#patient_confident\\.nick_name').val());

                $('#updated_confident\\.contact').val($('#patient_confident\\.contact').val());

                $('#updated_confident\\.reference').val($('#patient_confident\\.reference').val());


                $('#confident_auth').show();
            } else {
                $('#confident_auth').hide();
            }
        });
        $('#tmp\\.update_confident_auth').trigger('change');

        $('#updated_confident_auth\\.outro').change(function(){
            if($(this).prop( "checked" )){
                $('#updated_confident_auth_other_name').show();
            } else{
                $('#updated_confident_auth_other_name').hide();
            }
        });
        $('#updated_confident_auth\\.outro').trigger('change');

        $('#tmp\\.update_sex').change(function(){
            if($(this).is(':checked')){
                $('#update_sex').show();
            } else {
                $('#update_sex').hide();
            }
        });
        $('#tmp\\.update_sex').trigger('change');

        $('#tmp\\.update_birthdate').change(function(){
            if($(this).is(':checked')){
                $('#update_birthdate').show();
                $("#demographicsupdate\\.birth_date").val($("#patient\\.birth_date").val());
                $('#demographicsupdate\\.birthdate_estimated').val($('#patient\\.birthdate_estimated').val()==='true'?'true':$('#demographicsupdate\\.birthdate_estimated').val($('#patient\\.birthdate_estimated').val()==='false'?'false':'...'));
            } else {
                $('#update_birthdate').hide();
                $("#demographicsupdate\\.birth_date").val("");
                $('#demographicsupdate\\.birthdate_estimated').val("");
            }
        });
        $('#tmp\\.update_birthdate').trigger('change');

        $('#patient\\.sex').change(function(){
            if($(this).val() == 'M'){
                $('#tmp\\.patient\\.sex').val('Masculino');
            } else if ($(this).val() == 'F') {
                $('#tmp\\.patient\\.sex').val('Feminino');
            }
        });
        $('#patient\\.sex').trigger('change');

        $.fn.calculateFields = function () {
            var tempAgeInYears = $.trim($("#tmp\\.age_in_years").val());
            if (tempAgeInYears != '') {
                $('#demographicsupdate\\.birthdate_estimated').val('true');
                $('#demographicsupdate\\.birth_date').val($.fn.getTempBirthDate(tempAgeInYears));
            }
            return true;
        };

        $.fn.customValidationCheck = function () {
            return $.fn.calculateFields();
        };

        var dobType = $('#tmp\\.birthdate_type');
        dobType.change(function () {
            var $show_birth_date = $('.show_birthdate');
            var $show_age = $('.show_age');
            if ($('#tmp\\.birthdate_type').val() == 'age') {
                $show_age.show();
                $show_birth_date.find('input').val('');
                $show_birth_date.hide();
            } else {
                $show_age.hide();
                $show_age.find('input').val('');
                $show_birth_date.show();
            }
        });
        dobType.trigger('change');

    var patientUuid = $('#patient\\.uuid').val();
        var phoneNumberPersonAttributeType = "e2e3fd64-1d5f-11e0-b929-000c29ad1d07";
        var phoneNumber = htmlDataStore.getPersonAttribute(patientUuid,phoneNumberPersonAttributeType);
        phoneNumber = JSON.parse(phoneNumber);
        if('attribute_value' in phoneNumber){
            $('attribute_type_uuid').val(phoneNumber.attribute_value);
            $('#patient\\.phone_number').val(phoneNumber.attribute_value);
        }

    var addressReferencePersonAttributeType = "e944813c-11b1-49f3-b9a5-9fbbd10beec2";
    var addressReference = htmlDataStore.getPersonAttribute(patientUuid,addressReferencePersonAttributeType);
    addressReference = JSON.parse(addressReference);
    if('attribute_value' in addressReference){
        addressReference = addressReference.attribute_value;
    } else {
        addressReference = '';
    }
    $('#patient\\.address_reference').val(addressReference);

    var nicNameObs = htmlDataStore.getObsByConceptId(patientUuid, 23924);
        nicNameObs = JSON.parse(nicNameObs);
        var nicNameObsSize = nicNameObs.length;
        if(parseInt(nicNameObsSize)>0){
            $('#patient\\.nick_name').val(nicNameObs[0].valueText);
        }

    var medicalRecordNumber = htmlDataStore.getPatientIdentifier(patientUuid, "e2b966d0-1d5f-11e0-b929-000c29ad1d07");
        medicalRecordNumber = JSON.parse(medicalRecordNumber);
        if('identifier_value' in medicalRecordNumber) {
            $("#identifier_value").val(medicalRecordNumber.identifier_value);
            $("#tmp\\.medical_record_number").val(medicalRecordNumber.identifier_value);
        }

        var confidentName = htmlDataStore.getObsByConceptId(patientUuid, 1740);
        confidentName = JSON.parse(confidentName);
        var confidentNameObsSize = confidentName.length;
        if(parseInt(confidentNameObsSize)>0){
            $('#patient_confident\\.name').val(confidentName[0].valueText);
        }


        var confidentContactAuth = htmlDataStore.getObsByConceptId(patientUuid, 2177);
        confidentContactAuth = JSON.parse(confidentContactAuth);
        var confidentContactAuthSize = confidentContactAuth.length;
        if(parseInt(confidentContactAuthSize)>0){
            confidentContactAuth.forEach(obs => {
                if (obs.valueCoded.id === 5325) {
                    $('#confident_auth\\.proprio').prop("checked", true);
                } else if (obs.valueCoded.id === 1740) {
                    $('#confident_auth\\.confidente').prop("checked", true);
                } else if (obs.valueCoded.id === 23932) {
                    $('#confident_auth\\.outro').prop("checked", true);

                    var confidentOtherName = htmlDataStore.getObsByConceptId(patientUuid, 23932);
                    confidentOtherName = JSON.parse(confidentOtherName);
                    var confidentOtherNameObsSize = confidentOtherName.length;
                    if(parseInt(confidentOtherNameObsSize)>0){
                        $('#confident_auth_other_name').val(confidentOtherName[0].valueText);
                        $('#confident_auth_other_name').show();
                    }
                }
            });
        }

        
        

    var confidentnick_name = htmlDataStore.getObsByConceptId(patientUuid, 23930);
        confidentnick_name = JSON.parse(confidentnick_name);
        var confidentNickNameObsSize = confidentnick_name.length;
        if(parseInt(confidentNickNameObsSize)>0){
            $('#patient_confident\\.nick_name').val(confidentnick_name[0].valueText);
        }


    var confidentcontact = htmlDataStore.getObsByConceptId(patientUuid, 6224);
        confidentcontact = JSON.parse(confidentcontact);
        var confidentcontactObsSize = confidentcontact.length;
        if(parseInt(confidentcontactObsSize)>0){
            $('#patient_confident\\.contact').val(confidentcontact[0].valueText);
        }


    var confidentreference = htmlDataStore.getObsByConceptId(patientUuid, 165351);
        confidentreference = JSON.parse(confidentreference);
        var confidentreferenceObsSize = confidentreference.length;
        if(parseInt(confidentreferenceObsSize)>0){
            $('#patient_confident\\.reference').val(confidentreference[0].valueText);
        }
    


    document.setupAutoCompleteData('encounter\\.location_id');

    document.setupAutoCompleteDataForProvider('encounter\\.provider_id_select');

    $('#demographics_update_form').validate({});

    document.setupValidationForProvider("$('#encounter\\.provider_id_select').val()","encounter\\.provider_id");

    document.setupValidationForLocation("$('#encounter\\.location_id').val()","encounter\\.location_id");

    $("#patient_contact\\.section").click(function() {
        if($("#patient_contact\\.section_div").attr('hidden')==='hidden')
        {
            $("#patient_contact\\.section_div").removeAttr('hidden');
        }
        else{
            $("#patient_contact\\.section_div").attr('hidden', 'true');
        }
    });

    $("#patient_address\\.section").click(function() {
        if($("#patient_address\\.section_div").attr('hidden')==='hidden')
        {
            $("#patient_address\\.section_div").removeAttr('hidden');
        }
        else{
            $("#patient_address\\.section_div").attr('hidden', 'true');
        }
    });

    $("#patient_age\\.section_div").removeAttr('hidden');

    $("#patient_gender\\.section_div").removeAttr('hidden');

    $("#patient_names\\.section_div").removeAttr('hidden');

    $("#patient_confident_info\\.section").click(function() {
        if($("#patient_confident_info\\.section_div").attr('hidden')==='hidden')
        {
            $("#patient_confident_info\\.section_div").removeAttr('hidden');
        }
        else{
            $("#patient_confident_info\\.section_div").attr('hidden', 'true');
        }
    });

    $("#patient_confident\\.section").click(function() {
        if($("#patient_confident\\.section_div").attr('hidden')==='hidden')
        {
            $("#patient_confident\\.section_div").removeAttr('hidden');
        }
        else{
            $("#patient_confident\\.section_div").attr('hidden', 'true');
        }
    });

    $.each($('.addressPreferredField'), function(k,element){
        if($(element).val() != 'true'){
            $(element).closest('.patient_address_section').hide();
        }
    });

});
</script>
</html>